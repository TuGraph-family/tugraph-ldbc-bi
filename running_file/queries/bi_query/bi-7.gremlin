g.V().hasLabel('Tag').has('name','$tag')
.in('hasTag').hasLabel('Comment','Post')
.in('replyOf').hasLabel('Comment')
.where(__.out('hasTag').values('name').fold().not(where(unfold().is('$tag')))).as('comment')
.out('hasTag').hasLabel('Tag')
.group()
.by(__.values('name'))
.by(__.select('comment').count())
.unfold()
.project('relatedTag.name','count').by(keys).by(values)
.order().by('count',desc).by('relatedTag.name',asc)
.limit(100)